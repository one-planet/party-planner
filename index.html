<!DOCTYPE html>
<html>
<head>
  <title>Poll Voting Page</title>
  <link rel="stylesheet" type="text/css" href="voting.css">
</head>
<body>
  <div class="container">
    <h1 id="pollTitle">Poll Title</h1>

    <section id="votingSection">
      <h2>Available Days:</h2>
      <form id="votingForm">
        <!-- Checkboxes for available days will be dynamically added here -->
        <ul id="dayList"></ul>
      </form>
    </section>

    <button id="submitButton">Submit</button>
  </div>

  <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-database-compat.js"></script>
  <script src="firebaseConfig.js"></script>
  <script>
    // JavaScript code to handle dynamic content and capture votes

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);

    const database = firebase.database();
    const pollRef = database.ref('poll-demo');

    pollRef.on('value', (snapshot) => {
      const pollData = snapshot.val();

      if (pollData && pollData.title) {
        const pollTitle = pollData.title;
        const availableDays = pollData.availableDays;

        const titleElement = document.getElementById('pollTitle');
        const formElement = document.getElementById('votingForm');
        const dayListElement = document.getElementById('dayList');

        titleElement.textContent = pollTitle;

        // Dynamically generate list items for available days
        availableDays.forEach((day) => {
          const listItem = document.createElement('li');
          listItem.textContent = day;
          listItem.addEventListener('click', () => {
            listItem.classList.toggle('selected');
          });
          dayListElement.appendChild(listItem);
        });

        const submitButton = document.getElementById('submitButton');

        submitButton.addEventListener('click', () => {
          const selectedItems = Array.from(dayListElement.getElementsByClassName('selected'))
            .map((item) => item.textContent);

          // Here, you can capture the participant's vote and perform any necessary actions
          console.log('Selected Items:', selectedItems);
        });
      } else {
        console.log('empty poll data');
      }
    });
  </script>
</body>
</html>
