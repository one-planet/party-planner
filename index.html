<!DOCTYPE html>
<html>
<head>
  <title>Poll Voting Page</title>
  <link rel="stylesheet" type="text/css" href="voting.css">
</head>
<body>
  <h1 id="pollTitle">Poll Title</h1>

  <section id="votingSection">
    <h2>Available Days:</h2>
    <form id="votingForm">
      <!-- Checkboxes for available days will be dynamically added here -->
    </form>
  </section>

  <button id="submitButton">Submit</button>
  <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-database-compat.js"></script>
  <script src="firebaseConfig.js"></script>
  <script>
    // JavaScript code to handle dynamic content and capture votes

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);

    const database = firebase.database();
    const pollRef = database.ref('poll-demo');

    pollRef.on('value', (snapshot) => {
      const pollData = snapshot.val();

      if (pollData && pollData.title) {
        const pollTitle = pollData.title;
        const availableDays = pollData.availableDays;

        const titleElement = document.getElementById('pollTitle');
        const formElement = document.getElementById('votingForm');

        titleElement.textContent = pollTitle;

        // Dynamically generate checkboxes for available days
        availableDays.forEach((day) => {
          const checkbox = document.createElement('input');
          checkbox.type = 'checkbox';
          checkbox.id = day;
          checkbox.value = day;
          const label = document.createElement('label');
          label.htmlFor = day;
          label.textContent = day;

          formElement.appendChild(checkbox);
          formElement.appendChild(label);
          formElement.appendChild(document.createElement('br'));
        });

        const submitButton = document.getElementById('submitButton');

        submitButton.addEventListener('click', () => {
          const selectedDays = Array.from(formElement.querySelectorAll('input[type="checkbox"]:checked'))
            .map((checkbox) => checkbox.value);

          // Here, you can capture the participant's vote and perform any necessary actions
          console.log('Selected Days:', selectedDays);
        });
      } else {
        console.log('empty poll data');
      }
    });
  </script>
</body>
</html>
